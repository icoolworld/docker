yum -y install git make ncurses-devel gcc readline-devel bzip2 bzip2-devel perl

#进入源码目录
cd source/

#安装lua
tar zxf lua-5.3.4.tar.gz
cd lua-5.3.4
make -j 8 linux test
make -j 8 install INSTALL_TOP=/usr/local/lua5.3.4

mv /usr/bin/lua /usr/bin/lua5.1
mv /usr/bin/luac /usr/bin/luac5.1

ln -s /usr/local/lua5.3.4/bin/lua /usr/bin/lua
ln -s /usr/local/lua5.3.4/bin/luac /usr/bin/luac


#安装luajit
cd ../
tar zxf LuaJIT-2.0.5.tar.gz
cd LuaJIT-2.0.5
make -j 8 && make install PREFIX=/usr/local/luajit2.0.5

ln -s /usr/local/luajit2.0.5/bin/luajit /usr/bin/luajit


cd ../
git clone https://github.com/vim/vim.git
cd vim/src/
./configure --prefix=/usr/local/vim8 --with-features=huge --enable-cscope --enable-rubyinterp --enable-pythoninterp --with-python-config-dir=/usr/local/python2.7.13/lib/python2.7/config --enable-luainterp  --with-lua-prefix=/usr/local/lua5.3.4 --enable-perlinterp --enable-largefile --enable-multibyte --disable-netbeans --enable-cscope >> logs
make && make install

ln -s /usr/local/vim8/bin/vim /usr/bin/vim
